var config = require('./webpack.build.js')
var webpack = require('webpack')
var path = require('path');

config.output.filename = config.output.filename.replace(/\.js$/, '.min.js')

delete config.devtool

config.plugins.push(
  new webpack.optimize.UglifyJsPlugin({
    sourceMap: false,
    minimize: true,
    compress: {
        warnings: false,
        drop_console: true
    },
    output: {
        comments: false
    }
  })
)

config.externals = [{
    vue: {
        root: 'Vue',
        commonjs2: 'vue',
        commonjs: 'vue',
        amd: 'vue'
    }
}]

module.exports = config
